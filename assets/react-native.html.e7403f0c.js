import{ac as n,A as a,B as s,ae as e}from"./framework.a879f165.js";const t={},p=e(`<div class="custom-container tip"><p class="custom-container-title">提示</p><p>基于 ReactNative v0.70</p></div><h2 id="搭建环境" tabindex="-1"><a class="header-anchor" href="#搭建环境" aria-hidden="true">#</a> 搭建环境</h2><ul><li>安装 Android Studio</li><li>安装 SDK</li><li>使用 wifi 调试真机</li><li>在真机上设置服务端 ip 地址以最小代价启动开发</li></ul><p>创建 ReactNative 项目</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>npx react-native init my-project
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="最小示例" tabindex="-1"><a class="header-anchor" href="#最小示例" aria-hidden="true">#</a> 最小示例</h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>View<span class="token punctuation">,</span> Text<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-native&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>View<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Text<span class="token operator">&gt;</span>Hello<span class="token punctuation">,</span> World<span class="token operator">&lt;</span><span class="token operator">/</span>Text<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="原生组件" tabindex="-1"><a class="header-anchor" href="#原生组件" aria-hidden="true">#</a> 原生组件</h2><p>需要从<code>react-native</code>模块引入</p><p>View：作为布局组件使用 Text：作为文本容 ScrollView：创建滚动视图</p><p>Button 创建一个按钮</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Button onPress<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span> title<span class="token operator">=</span><span class="token string">&quot;点我！&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Image 创建一个图片组件</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code></code></pre><div class="line-numbers" aria-hidden="true"></div></div><h2 id="样式代码" tabindex="-1"><a class="header-anchor" href="#样式代码" aria-hidden="true">#</a> 样式代码</h2><p>需要从<code>react-native</code>模块引入</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>View<span class="token punctuation">,</span> Text<span class="token punctuation">,</span> StyleSheet<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react-native&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>View<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Text style<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>txt1<span class="token punctuation">}</span> <span class="token operator">&gt;</span>Header<span class="token operator">&lt;</span><span class="token operator">/</span>Text<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> styles <span class="token operator">=</span> StyleSheet<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">txt1</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">&#39;red&#39;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="事件处理" tabindex="-1"><a class="header-anchor" href="#事件处理" aria-hidden="true">#</a> 事件处理</h2><h2 id="配置-gradle-代理-重要" tabindex="-1"><a class="header-anchor" href="#配置-gradle-代理-重要" aria-hidden="true">#</a> 配置 Gradle 代理（重要）</h2><p>在 gradle.properties 加入如下内容：</p><div class="language-gradle line-numbers-mode" data-ext="gradle"><pre class="language-gradle"><code>systemProp<span class="token punctuation">.</span>http<span class="token punctuation">.</span>proxyHost<span class="token operator">=</span><span class="token number">127.0</span><span class="token punctuation">.</span><span class="token number">0.1</span>
systemProp<span class="token punctuation">.</span>http<span class="token punctuation">.</span>proxyPort<span class="token operator">=</span><span class="token number">7890</span>
systemProp<span class="token punctuation">.</span>https<span class="token punctuation">.</span>proxyHost<span class="token operator">=</span><span class="token number">127.0</span><span class="token punctuation">.</span><span class="token number">0.1</span>
systemProp<span class="token punctuation">.</span>https<span class="token punctuation">.</span>proxyPort<span class="token operator">=</span><span class="token number">7890</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="注意事项" tabindex="-1"><a class="header-anchor" href="#注意事项" aria-hidden="true">#</a> 注意事项</h2><p>Android 限制发送不安全的请求时，<code>AndroidManifest.xml</code>添加以下条目：</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>application</span>
  <span class="token attr-name"><span class="token namespace">android:</span>usesCleartextTraffic</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>application</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>不允许读写存储时，<code>AndroidManifest.xml</code>添加以下条目</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android.permission.READ_EXTERNAL_STORAGE<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>android.permission.WRITE_EXTERNAL_STORAGE<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="同时安装-release-和-debug-包的办法" tabindex="-1"><a class="header-anchor" href="#同时安装-release-和-debug-包的办法" aria-hidden="true">#</a> 同时安装 release 和 debug 包的办法</h2><p>利于在同一设备进行调试，在<code>android\\app\\build.gradle</code>中加入</p><div class="language-gradle line-numbers-mode" data-ext="gradle"><pre class="language-gradle"><code>buildTypes <span class="token punctuation">{</span>
    debug <span class="token punctuation">{</span>
        applicationIdSuffix <span class="token interpolation-string"><span class="token string">&quot;debug&quot;</span></span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="根据-package-json-获取构建-apk-版本" tabindex="-1"><a class="header-anchor" href="#根据-package-json-获取构建-apk-版本" aria-hidden="true">#</a> 根据 package.json 获取构建 APK 版本</h2><p>自动化版本构建</p><div class="language-gradle line-numbers-mode" data-ext="gradle"><pre class="language-gradle"><code><span class="token comment">/**
 * 获取 APP 构建版本
 */</span>
<span class="token keyword">def</span> <span class="token function">getAppVersion</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">def</span> inputFile <span class="token operator">=</span> new <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">&quot;../package.json&quot;</span></span><span class="token punctuation">)</span>
    <span class="token keyword">def</span> packageJson <span class="token operator">=</span> new <span class="token class-name">JsonSlurper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parseText</span><span class="token punctuation">(</span>inputFile<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
    return packageJson<span class="token punctuation">[</span><span class="token interpolation-string"><span class="token string">&quot;version&quot;</span></span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">def</span> appVersion <span class="token operator">=</span> <span class="token function">getAppVersion</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

android <span class="token punctuation">{</span>
    defaultConfig <span class="token punctuation">{</span>
        versionCode <span class="token number">1</span>
        versionName appVersion
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="构建-app" tabindex="-1"><a class="header-anchor" href="#构建-app" aria-hidden="true">#</a> 构建 APP</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> android
./gradlew assembleRelease
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="构建优化" tabindex="-1"><a class="header-anchor" href="#构建优化" aria-hidden="true">#</a> 构建优化</h2><p>为了减少构建体积，为<code>build.gradle</code>修改以下条目</p><div class="language-gradle line-numbers-mode" data-ext="gradle"><pre class="language-gradle"><code><span class="token operator">-</span> ndk <span class="token punctuation">{</span>
<span class="token operator">-</span>   abiFilters <span class="token interpolation-string"><span class="token string">&quot;armeabi-v7a&quot;</span></span><span class="token punctuation">,</span> <span class="token interpolation-string"><span class="token string">&quot;x86&quot;</span></span>
<span class="token operator">-</span> <span class="token punctuation">}</span>
<span class="token operator">-</span> <span class="token keyword">def</span> enableSeparateBuildPerCPUArchitecture <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token operator">+</span> <span class="token keyword">def</span> enableSeparateBuildPerCPUArchitecture <span class="token operator">=</span> <span class="token boolean">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="参考资料" tabindex="-1"><a class="header-anchor" href="#参考资料" aria-hidden="true">#</a> 参考资料</h2><ul><li>第一行代码（第3版）</li></ul>`,39),o=[p];function i(l,c){return a(),s("div",null,o)}const d=n(t,[["render",i],["__file","react-native.html.vue"]]);export{d as default};
